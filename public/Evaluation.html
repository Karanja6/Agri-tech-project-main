<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="/stylesheet.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Farmers Evaluation</title>
  <style>
    /* Tiny additions for status colors */
    .status-ok   { color:#1e5631; font-weight:700; }
    .status-low  { color:#b00020; font-weight:700; }
    .status-high { color:#b00020; font-weight:700; }
    .just-filled { outline:2px solid #3fa34d; background:#f2fff4; transition:background-color .8s ease; }
    .eval-card   { max-width:900px; margin:0 auto; }
    .eval-actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
    .sm-hint     { display:block; margin-top:6px; color:#3d3d3d; font-size:.95rem; }
    .tight { white-space:nowrap; }
  </style>
</head>
<body>
  <nav class="eval-card">
    <a href="/home">Home</a>
    <a href="/about%20us.html">About</a>
    <a href="/Evaluation.html">Farming Evaluation</a>
    <a href="/Diseaseandpestmanagement.html">Disease and pest management</a>
    <a href="/advice.html">Advice</a>
    <a href="/market.html">Market</a>
  </nav>

  <header class="eval-card"><h1>Farmers Evaluation</h1></header>

  <main class="eval-card">
    <form id="crop_process">
      <h2>Crop Process</h2>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <label>Farmers ID
          <input type="number" id="farmers_id" name="farmers_id" required>
        </label>
        <label>Crop (e.g. maize, rice, mungbean)
          <input type="text" id="crop" name="crop" required>
        </label>
        <label>Process Type
          <select id="process_type" name="process_type" required>
            <option value="land_prep">Land Preparation</option>
            <option value="planting">Planting</option>
            <option value="irrigation">Irrigation</option>
            <option value="weed_control">Weed Control</option>
            <option value="pest_management">Pest Management</option>
            <option value="fertilization">Fertilization</option>
            <option value="harvest">Harvest</option>
            <option value="soil_management">Soil Management</option>
          </select>
        </label>
        <label>Process Date
          <input type="date" id="process_date" name="process_date" required>
        </label>
      </div>

      <fieldset style="margin-top:16px">
        <legend><strong>Current Conditions / Sensors (Manual)</strong></legend>

        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
          <input id="eval_city" type="text" placeholder="Town/City (auto weather)">
          <button type="button" id="evalCityFetchBtn" title="Fetch weather for this town">Use City Weather</button>
          <span class="sm-hint">Tip: You can fill Temp/Humidity/Rainfall manually or auto-fill using town.</span>
        </div>

        <!-- Evaluation table -->
        <table class="process-table" id="evalTable" style="display:table; width:100%; margin-top:12px">
          <thead>
            <tr>
              <th class="tight">Parameter</th>
              <th>Current</th>
              <th>Recommended Range</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Nitrogen (N)</td>
              <td><input id="N" type="number" step="1" placeholder="e.g. 90"></td>
              <td><span id="rec_N">—</span></td>
              <td><span id="status_N">—</span></td>
            </tr>
            <tr>
              <td>Phosphorus (P)</td>
              <td><input id="P" type="number" step="1" placeholder="e.g. 42"></td>
              <td><span id="rec_P">—</span></td>
              <td><span id="status_P">—</span></td>
            </tr>
            <tr>
              <td>Potassium (K)</td>
              <td><input id="K" type="number" step="1" placeholder="e.g. 43"></td>
              <td><span id="rec_K">—</span></td>
              <td><span id="status_K">—</span></td>
            </tr>
            <tr>
              <td>Soil pH</td>
              <td><input id="ph" type="number" step="0.1" placeholder="e.g. 6.5"></td>
              <td><span id="rec_ph">—</span></td>
              <td><span id="status_ph">—</span></td>
            </tr>
            <tr>
              <td>Temperature (°C)</td>
              <td><input id="temperature" type="number" step="0.1" placeholder="e.g. 21.0"></td>
              <td><span id="rec_temperature">—</span></td>
              <td><span id="status_temperature">—</span></td>
            </tr>
            <tr>
              <td>Humidity (%)</td>
              <td><input id="humidity" type="number" step="0.1" placeholder="e.g. 82"></td>
              <td><span id="rec_humidity">—</span></td>
              <td><span id="status_humidity">—</span></td>
            </tr>
            <tr>
              <td>Rainfall (mm)</td>
              <td><input id="rainfall" type="number" step="0.1" placeholder="e.g. 203"></td>
              <td><span id="rec_rainfall">—</span></td>
              <td><span id="status_rainfall">—</span></td>
            </tr>
          </tbody>
        </table>

        <div class="eval-actions">
          <label class="tight"><input type="checkbox" id="smsAlert"> SMS me if out of range</label>
          <input id="notify_phone" type="tel" placeholder="+2547XXXXXXXX">
        </div>

        <div class="eval-actions">
          <button type="button" id="evalBtn">Evaluate & Save</button>
          <button type="submit">Save Process Only</button>
        </div>
      </fieldset>
    </form>

    <!-- Results card -->
    <section class="recommendation-container" id="evalResultCard" style="display:none;text-align:center">
      <h2>Evaluation Result</h2>
      <div id="processMlResult" style="font-weight:800;color:#0a0a0a;white-space:pre-line"></div>
      <ul id="processWarnings" style="margin-top:10px;display:none"></ul>
    </section>

    <section id="completed_processes_section" style="margin-top:20px">
      <h2>Completed Processes for Farmer ID: <span id="farmer-id-display">N/A</span></h2>
      <table class="process-table" id="completed_processes_table">
        <thead><tr><th>Crop</th><th>Process Type</th><th>Process Date</th></tr></thead>
        <tbody></tbody>
      </table>
      <button class="show-process-btn" id="showProcessBtn" style="margin-top:10px">Show Processes</button>
    </section>

    <div class="Help"><h3>For any complaints call us on 0123456754</h3></div>
  </main>

  <script defer src="/script.js"></script>
</body>
</html>
